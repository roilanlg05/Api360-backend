class Users(SQLModel, table=True, schema=auth):
    id: uuid autogenerated primary key
    full_name: str
    email: str unique not null 
    profile_pic: str unique

class Manager(Users):
    id uuid references users.id
    phone: str unique not null
    role: str default(manager)
    organization_id: uuid references Organization.id

class Crew(Users):
    id uuid references users.id
    aeroline: str  #ejemplo AA, WN ...
    role: str default(crew)


class Driver(Users):
    id uuid references users.id
    phone: str unique not null
    role: str default(driver)
    is_active: bool
    point: str #punto de localizacion
    location_id: uuid references Location.id   

class Organization(SQLModel, table=True):
    id: uuid autogenerated primary key
    name: str unique not null
    email: references manager.id not null
    phone: references manager.phone not null
    plan: str default freemium
    status: str 

class Location(SQLModel, table=True):
    id: uuid autogenerated primary key
    organization_id: uuid references Organization.id index
    name: str #ejemplo SDF, MIA
    point: str #punto de localizacion

class Trip(SQLModel, table=True):
    id: uuid autogenerated primary key
    assigned_driver: uuid references driver.id index 
    location_id: uuid references location.id index
    pick_up_time: datetime not null
    pick_up_location: str not null
    drop_off_location: str not null
    aeroline: str not null
    riders: dict {"pilot": int, "flight_attendent": int} not null
    started_at: datetime
    picked_up_at: datetime
    dropped_off_at: datetime
    created_at: datetime
    updated_at: datetime

class Notification():
    id: uuid autogenerated 
    from: str | uuid default(system)
    to:  str | uuid not null references users.id
    link: str
    created_at datetime
    delivered_at datetime


class TripHistory():
    id: uuid autogenerated primary key
    assigned_driver: uuid references driver.id index 
    location_id: uuid references location.id index
    pick_up_time: datetime not null
    pick_up_location: str not null
    drop_off_location: str not null
    aeroline: str not null
    riders: dict {"pilot": int, "flight_attendent": int} not null
    started_at: datetime
    picked_up_at: datetime
    dropped_off_at: datetime
    created_at: datetime
    updated_at: datetime 


class RefreshToken(SQLModel, table=True, schema=auth):
    id: uuid autogenerated
    user_id: uuid references users.id                                                 
    token_hash: str                                               
    expires_at: datetime                                          
    revoked: bool = False                                         
    created_at: datetime 

class Messages():
    id
    chat_id
    recipent
    sender
    content

class Chat()
    id 
    participants{user_id1, user_id2}








